{# templates/emails/scan_completed.html.twig #}
{% extends 'emails/base.html.twig' %}

{% block header_color %}#28a745{% endblock %}
{% block info_box_color %}#28a745{% endblock %}

{% block extra_styles %}
    .stats-grid { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 10px; 
        margin: 15px 0; 
    }
    .stat-card { 
        background: #f8f9fa; 
        padding: 15px; 
        text-align: center; 
        border-radius: 5px; 
        border: 1px solid #dee2e6; 
    }
    .stat-value { 
        font-size: 24px; 
        font-weight: bold; 
        color: #28a745; 
    }
    .stat-label { 
        font-size: 12px; 
        color: #666; 
        text-transform: uppercase; 
        margin-top: 5px;
    }
{% endblock %}

{% block header_icon %}âœ…{% endblock %}
{% block header_title %}Security Scan Completed{% endblock %}

{% block content %}
    <div class="info-box">
        <div class="info-row">
            <span class="label">Repository:</span>
            <span class="value">{{ repository_name }}</span>
        </div>
        <div class="info-row">
            <span class="label">Branch:</span>
            <span class="value">{{ branch }}</span>
        </div>
        <div class="info-row">
            <span class="label">Provider:</span>
            <span class="value">{{ provider_code }}</span>
        </div>
        <div class="info-row">
            <span class="label">Scan ID:</span>
            <span class="value"><code>{{ scan_id }}</code></span>
        </div>
    </div>

    <h3>Scan Results</h3>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ vulnerability_count }}</div>
            <div class="stat-label">Vulnerabilities</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ duration }}</div>
            <div class="stat-label">Duration</div>
        </div>
    </div>

    <h3>Timeline</h3>
    <div class="info-box">
        <div class="info-row">
            <span class="label">Started:</span>
            <span class="value">{{ started_at }}</span>
        </div>
        <div class="info-row">
            <span class="label">Completed:</span>
            <span class="value">{{ completed_at }}</span>
        </div>
    </div>
{% endblock %}
